<html>
    <head>
        <title>EchoAPI</title>
        <script type="text/javascript" src="Responses.json"></script>
        <script type="text/javascript">
            var url_string = window.location.href; //window.location.href
            var url = new URL(url_string);
            var Language = url.searchParams.get("lang");
            var Response = url.searchParams.get("key");
            var ReturningData = {
                "Data": null,
                "Error": {
                    "Code": 0,
                    "Message": ""
                },
                "LanguageIsProvided": false,
                "KeyIsProvided": false
            }
            function PutData() {
                if (Response === null && Language === null) {
                    ReturningData.Data = "This message appeared because the language API has been called wrongly. Please inform Proxy#0814 or JurrijnP#1676";
                    ReturningData.Error = {
                        "Code": 1,
                        "Message": "No language or key provided, returning error message."
                    };
                } else if (Response === null) {
                    if (Data.hasOwnProperty(Language)) {
                        ReturningData.Data = JSON.stringify(Data[Language]);
                        ReturningData.LanguageIsProvided = true;
                    } else {
                        ReturningData.Data = JSON.stringify(Data.EN);
                        ReturningData.Error = {
                            "Code": 2,
                            "Message": "Language not found, returning English instead."
                        };
                        ReturningData.LanguageIsProvided = true;
                    }
                } else {
                
                    if (Data.hasOwnProperty(Language)) {
                    
                        if (Data[Language].hasOwnProperty(Response)) {
                        
                            ReturningData.Data = Data[Language][Response];
                            ReturningData.LanguageIsProvided = true;
                            ReturningData.KeyIsProvided = true;
                            
                        } else {
                        
                            ReturningData.Data = "This message appeared because the language API has been called wrongly. Please inform Proxy#0814 or JurrijnP#1676";
                            ReturningData.Error = {
                                "Code": 3,
                                "Message": "Language found. Key not found, returning error message."
                            };
                            ReturningData.LanguageIsProvided = true;
                            ReturningData.KeyIsProvided = true;
                            
                        }
                        
                    } else if (Data["EN"].hasOwnProperty(Response)) {
                    
                        ReturningData.Data = Data.EN[Response];
                        ReturningData.Error = {
                            "Code": 4,
                            "Message": "Key found. Language not found, returning English key instead."
                        };
                        ReturningData.LanguageIsProvided = true;
                        ReturningData.KeyIsProvided = true;
                        
                    } else {
                    
                        ReturningData.Data = "This message appeared because the language API has been called wrongly. Please inform Proxy#0814 or JurrijnP#1676";
                        ReturningData.Error = {
                            "Code": 5,
                            "Message": "Language not found. Key not found, returning error message."
                        };
                        ReturningData.LanguageIsProvided = true;
                        ReturningData.KeyIsProvided = true;
                        
                    }
                    
                }
                document.getElementById("Data").innerHTML = JSON.stringify(ReturningData);
            }
        </script>
    </head>
    
    <body onload="PutData()">
        <span id="Data"></span>
    </body>
</html>
